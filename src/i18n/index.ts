import i18n from 'i18next';
import { initReactI18next } from 'react-i18next';
import LanguageDetector from 'i18next-browser-languagedetector';

// Traductions françaises
const fr = {
  common: {
    save: 'Enregistrer',
    cancel: 'Annuler',
    delete: 'Supprimer',
    edit: 'Modifier',
    view: 'Voir',
    add: 'Ajouter',
    search: 'Rechercher',
    filter: 'Filtrer',
    export: 'Exporter',
    import: 'Importer',
    loading: 'Chargement...',
    error: 'Erreur',
    success: 'Succès',
    warning: 'Attention',
    info: 'Information',
    confirm: 'Confirmer',
    yes: 'Oui',
    no: 'Non',
    close: 'Fermer',
    back: 'Retour',
    next: 'Suivant',
    previous: 'Précédent',
    total: 'Total',
    subtotal: 'Sous-total',
    discount: 'Remise',
    tax: 'TVA',
    date: 'Date',
    time: 'Heure',
    status: 'Statut',
    actions: 'Actions',
    details: 'Détails',
    description: 'Description',
    name: 'Nom',
    email: 'Email',
    phone: 'Téléphone',
    address: 'Adresse',
    company: 'Entreprise',
    notes: 'Notes',
    required: 'Obligatoire',
    optional: 'Optionnel',
  },
  navigation: {
    dashboard: 'Tableau de bord',
    contacts: 'Contacts',
    inventory: 'Inventaire',
    events: 'Événements',
    quotes: 'Devis',
    invoices: 'Factures',
    bonLivraison: 'Bons de livraison',
    technicalSheets: 'Fiches techniques',
    products: 'Produits',
    services: 'Services',
    chat: 'Chat',
    settings: 'Paramètres',
    analytics: 'Analyses',
    notifications: 'Notifications',
  },
  dashboard: {
    title: 'Tableau de bord',
    welcome: 'Bienvenue dans votre CRM',
    totalContacts: 'Total contacts',
    totalProducts: 'Total produits',
    totalQuotes: 'Total devis',
    totalInvoices: 'Total factures',
    recentActivity: 'Activité récente',
    quickActions: 'Actions rapides',
    newContact: 'Nouveau contact',
    newQuote: 'Nouveau devis',
    newInvoice: 'Nouvelle facture',
    viewAll: 'Voir tout',
  },
  contacts: {
    title: 'Contacts',
    addContact: 'Ajouter un contact',
    editContact: 'Modifier le contact',
    deleteContact: 'Supprimer le contact',
    contactDetails: 'Détails du contact',
    type: {
      client: 'Client',
      prospect: 'Prospect',
      supplier: 'Fournisseur',
      partner: 'Partenaire',
    },
    status: {
      active: 'Actif',
      inactive: 'Inactif',
      blocked: 'Bloqué',
    },
  },
  products: {
    title: 'Produits',
    addProduct: 'Ajouter un produit',
    editProduct: 'Modifier le produit',
    deleteProduct: 'Supprimer le produit',
    productDetails: 'Détails du produit',
    sku: 'SKU',
    category: 'Catégorie',
    price: 'Prix',
    costPrice: 'Prix de revient',
    salePrice: 'Prix de vente',
    stock: 'Stock',
    quantity: 'Quantité',
    minQuantity: 'Quantité minimale',
    location: 'Emplacement',
    availability: {
      available: 'Disponible',
      outOfStock: 'Rupture de stock',
      discontinued: 'Discontinué',
    },
  },
  quotes: {
    title: 'Devis',
    addQuote: 'Créer un devis',
    editQuote: 'Modifier le devis',
    deleteQuote: 'Supprimer le devis',
    quoteDetails: 'Détails du devis',
    client: 'Client',
    validityDays: 'Validité (jours)',
    paymentTerms: 'Conditions de paiement',
    items: 'Articles',
    addItem: 'Ajouter un article',
    unitPrice: 'Prix unitaire',
    status: {
      draft: 'Brouillon',
      sent: 'Envoyé',
      accepted: 'Accepté',
      rejected: 'Rejeté',
      expired: 'Expiré',
    },
  },
  invoices: {
    title: 'Factures',
    addInvoice: 'Créer une facture',
    editInvoice: 'Modifier la facture',
    deleteInvoice: 'Supprimer la facture',
    invoiceDetails: 'Détails de la facture',
    dueDate: 'Date d\'échéance',
    advanceAmount: 'Montant d\'avance',
    remainingAmount: 'Montant restant',
    paymentMethod: {
      cash: 'Espèces',
      bankTransfer: 'Virement bancaire',
      card: 'Carte',
      check: 'Chèque',
    },
    status: {
      draft: 'Brouillon',
      sent: 'Envoyée',
      paid: 'Payée',
      partial: 'Partiellement payée',
      overdue: 'En retard',
      cancelled: 'Annulée',
    },
  },
  notifications: {
    title: 'Notifications',
    markAsRead: 'Marquer comme lu',
    markAllAsRead: 'Tout marquer comme lu',
    deleteNotification: 'Supprimer la notification',
    viewAll: 'Voir toutes les notifications',
    filters: {
      all: 'Toutes',
      unread: 'Non lues',
      read: 'Lues',
      prospect: 'Prospects',
      event: 'Événements',
      stock: 'Stock',
      invoice: 'Factures',
    },
  },
  errors: {
    generic: 'Une erreur s\'est produite',
    network: 'Erreur de connexion',
    validation: 'Erreur de validation',
    notFound: 'Élément non trouvé',
    unauthorized: 'Non autorisé',
    forbidden: 'Accès interdit',
    serverError: 'Erreur serveur',
  },
  validation: {
    required: 'Ce champ est obligatoire',
    email: 'Email invalide',
    phone: 'Numéro de téléphone invalide',
    minLength: 'Minimum {{min}} caractères',
    maxLength: 'Maximum {{max}} caractères',
    min: 'Minimum {{min}}',
    max: 'Maximum {{max}}',
    pattern: 'Format invalide',
  },
};

// Traductions arabes
const ar = {
  common: {
    save: 'حفظ',
    cancel: 'إلغاء',
    delete: 'حذف',
    edit: 'تعديل',
    view: 'عرض',
    add: 'إضافة',
    search: 'بحث',
    filter: 'تصفية',
    export: 'تصدير',
    import: 'استيراد',
    loading: 'جاري التحميل...',
    error: 'خطأ',
    success: 'نجح',
    warning: 'تحذير',
    info: 'معلومات',
    confirm: 'تأكيد',
    yes: 'نعم',
    no: 'لا',
    close: 'إغلاق',
    back: 'رجوع',
    next: 'التالي',
    previous: 'السابق',
    total: 'المجموع',
    subtotal: 'المجموع الفرعي',
    discount: 'خصم',
    tax: 'ضريبة',
    date: 'التاريخ',
    time: 'الوقت',
    status: 'الحالة',
    actions: 'الإجراءات',
    details: 'التفاصيل',
    description: 'الوصف',
    name: 'الاسم',
    email: 'البريد الإلكتروني',
    phone: 'الهاتف',
    address: 'العنوان',
    company: 'الشركة',
    notes: 'ملاحظات',
    required: 'مطلوب',
    optional: 'اختياري',
  },
  navigation: {
    dashboard: 'لوحة التحكم',
    contacts: 'جهات الاتصال',
    inventory: 'المخزون',
    events: 'الأحداث',
    quotes: 'عروض الأسعار',
    invoices: 'الفواتير',
    bonLivraison: 'إيصالات التسليم',
    technicalSheets: 'الأوراق الفنية',
    products: 'المنتجات',
    services: 'الخدمات',
    chat: 'المحادثة',
    settings: 'الإعدادات',
    analytics: 'التحليلات',
    notifications: 'الإشعارات',
  },
  dashboard: {
    title: 'لوحة التحكم',
    welcome: 'مرحباً بك في نظام إدارة العلاقات',
    totalContacts: 'إجمالي جهات الاتصال',
    totalProducts: 'إجمالي المنتجات',
    totalQuotes: 'إجمالي عروض الأسعار',
    totalInvoices: 'إجمالي الفواتير',
    recentActivity: 'النشاط الأخير',
    quickActions: 'إجراءات سريعة',
    newContact: 'جهة اتصال جديدة',
    newQuote: 'عرض سعر جديد',
    newInvoice: 'فاتورة جديدة',
    viewAll: 'عرض الكل',
  },
  // ... autres traductions arabes
};

// Traductions anglaises
const en = {
  common: {
    save: 'Save',
    cancel: 'Cancel',
    delete: 'Delete',
    edit: 'Edit',
    view: 'View',
    add: 'Add',
    search: 'Search',
    filter: 'Filter',
    export: 'Export',
    import: 'Import',
    loading: 'Loading...',
    error: 'Error',
    success: 'Success',
    warning: 'Warning',
    info: 'Information',
    confirm: 'Confirm',
    yes: 'Yes',
    no: 'No',
    close: 'Close',
    back: 'Back',
    next: 'Next',
    previous: 'Previous',
    total: 'Total',
    subtotal: 'Subtotal',
    discount: 'Discount',
    tax: 'Tax',
    date: 'Date',
    time: 'Time',
    status: 'Status',
    actions: 'Actions',
    details: 'Details',
    description: 'Description',
    name: 'Name',
    email: 'Email',
    phone: 'Phone',
    address: 'Address',
    company: 'Company',
    notes: 'Notes',
    required: 'Required',
    optional: 'Optional',
  },
  navigation: {
    dashboard: 'Dashboard',
    contacts: 'Contacts',
    inventory: 'Inventory',
    events: 'Events',
    quotes: 'Quotes',
    invoices: 'Invoices',
    bonLivraison: 'Delivery Notes',
    technicalSheets: 'Technical Sheets',
    products: 'Products',
    services: 'Services',
    chat: 'Chat',
    settings: 'Settings',
    analytics: 'Analytics',
    notifications: 'Notifications',
  },
  dashboard: {
    title: 'Dashboard',
    welcome: 'Welcome to your CRM',
    totalContacts: 'Total contacts',
    totalProducts: 'Total products',
    totalQuotes: 'Total quotes',
    totalInvoices: 'Total invoices',
    recentActivity: 'Recent activity',
    quickActions: 'Quick actions',
    newContact: 'New contact',
    newQuote: 'New quote',
    newInvoice: 'New invoice',
    viewAll: 'View all',
  },
  // ... autres traductions anglaises
};

const resources = {
  fr: { translation: fr },
  ar: { translation: ar },
  en: { translation: en },
};

i18n
  .use(LanguageDetector)
  .use(initReactI18next)
  .init({
    resources,
    fallbackLng: 'fr',
    debug: process.env.NODE_ENV === 'development',
    
    interpolation: {
      escapeValue: false,
    },
    
    detection: {
      order: ['localStorage', 'navigator', 'htmlTag'],
      caches: ['localStorage'],
    },
  });

export default i18n;
